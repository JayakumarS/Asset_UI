<section class="content">
  <div class="content-block">
    <div class="block-header" style="padding: 0.5% !important;">
      <!-- breadcrumb -->
      <app-breadcrumb [title]="'Category'"  [items]="['Category']" [active_item]="'Category List'"></app-breadcrumb>
    </div>
    <div class="card">
      <div class="body">

        <table mat-table #outerSort="matSort" [dataSource]="dataSource" multiTemplateDataRows class="mat-elevation-z8"
          matSort>
          <ng-container matColumnDef="categoryName">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Category Name </th>
            <td mat-cell *matCellDef="let row"> {{row.categoryName}} </td>
        </ng-container>
        <ng-container matColumnDef="Description">
          <th mat-header-cell *matHeaderCellDef mat-sort-header> Description </th>
          <td mat-cell *matCellDef="let row"> {{row.Description}} </td>
      </ng-container>
      <ng-container matColumnDef="isactive">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Active </th>
        <td mat-cell *matCellDef="let row"> {{row.isactive}} </td>
    </ng-container>
    

              <!-- actions -->
              <ng-container matColumnDef="actions">
                <th mat-header-cell class="pr-0" *matHeaderCellDef>Actions</th>
                <td mat-cell *matCellDef="let row; let i=index;" class="pr-0">
                  <button  *ngIf="permissionList?.modify && row.countOfCategory!=0"mat-icon-button color="accent" (click)="$event.stopPropagation()" (click)="editCall(row)"
                    class="tbl-action-btn">
                    <app-feather-icons [icon]="'edit'" [class]="'tbl-fav-edit'"></app-feather-icons>
                  </button>
                  <button *ngIf="permissionList?.delete && row.countOfCategory!=0" mat-icon-button color="accent" (click)="$event.stopPropagation()"
                    (click)="deleteItem(row)" class="tbl-action-btn">
                    <app-feather-icons [icon]="'trash-2'" [class]="'tbl-fav-delete'"></app-feather-icons>
                  </button>
                  <button   mat-icon-button color="accent"  (click)="$event.stopPropagation()" (click)="viewCall(row)"  class="tbl-action-btn">
                    <app-feather-icons matTooltip="View" [icon]="'eye'" [class]="'tbl-fav-delete'">
                    </app-feather-icons>
                  </button>
                </td>
              </ng-container>

          <!-- Expanded Content Column - The detail row is made up of this one column that spans across all columns -->
          <ng-container matColumnDef="expandedDetail">
            <td mat-cell *matCellDef="let element" [attr.colspan]="columnsToDisplay.length">
              <div class="example-element-detail" *ngIf="element.addresses?.data.length"
                [@detailExpand]="element == expandedElement ? 'expanded' : 'collapsed'">
                <div class="inner-table mat-elevation-z8" >
                  <mat-form-field>
                    <input matInput (keyup)="applyFilter($event.target.value)" placeholder="Filter" />
                  </mat-form-field>
                  <table #innerTables mat-table #innerSort="matSort" [dataSource]="element.addresses" matSort
                    multiTemplateDataRows>
                    <ng-container matColumnDef="parentsCategory">
                      <th mat-header-cell *matHeaderCellDef mat-sort-header> Parent Category </th>
                      <td mat-cell *matCellDef="let row"> {{row.parentsCategory}}
                      </td>
                    </ng-container>
                    <!-- <ng-container matColumnDef="assetCode">
                      <th mat-header-cell *matHeaderCellDef mat-sort-header> Asset Code </th>
                      <td mat-cell *matCellDef="let row"> {{row.assetcode}}
                      </td>
                    </ng-container>
                    <ng-container matColumnDef="assetLocation">
                      <th mat-header-cell *matHeaderCellDef mat-sort-header> Asset Location </th>
                      <td mat-cell *matCellDef="let row"> {{row.assetLocation}}
                      </td>
                    </ng-container>
                    <ng-container matColumnDef="putToUseDate">
                      <th mat-header-cell *matHeaderCellDef mat-sort-header> Put To Use Date </th>
                      <td mat-cell *matCellDef="let row"> {{row.putToUseDate}}
                      </td>
                    </ng-container>
                    <ng-container matColumnDef="assetUser">
                      <th mat-header-cell *matHeaderCellDef mat-sort-header> Asset User </th>
                      <td mat-cell *matCellDef="let row"> {{row.assetUser}}
                      </td>
                    </ng-container> -->
                    

                    <!-- Expanded SubContent Column - The subdetail row is made up of this one column that spans across all columns -->
                    <ng-container matColumnDef="expandedSubDetail">
                      <td mat-cell *matCellDef="let element" [attr.colspan]="innerDisplayedColumns.length">

                        <div class="example-element-detail" *ngIf="element?.blocks?.data.length"
                          [@detailExpand]="element == expandedSubElement ? 'expanded' : 'collapsed'">

                          <div class="inner-table mat-elevation-z8" *ngIf="expandedSubElement">
                            <table #subTables mat-table #subSort="matSort" [dataSource]="element.blocks" matSort>
                              <ng-container matColumnDef="sourceLocation">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header> Source Location </th>
                                <td mat-cell *matCellDef="let row"> {{row.sourceLocation}}
                                </td>
                              </ng-container>
                              <ng-container matColumnDef="destinationLocation">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header> Destination Location </th>
                                <td mat-cell *matCellDef="let row"> {{row.destinationLocation}}
                                </td>
                              </ng-container>
                              <ng-container matColumnDef="reference">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header> Reference </th>
                                <td mat-cell *matCellDef="let row"> {{row.reference}}
                                </td>
                              </ng-container>
                              <tr mat-header-row *matHeaderRowDef="subBlockDisplayedColumns"></tr>
                              <tr style="height: 37px;" mat-row *matRowDef="let row; columns: subBlockDisplayedColumns;"></tr>
                            </table>
                          </div>
                        </div>
                      </td>
                    </ng-container>

                    <tr mat-header-row *matHeaderRowDef="innerDisplayedColumns"></tr>
                    <tr style="height: 37px;" mat-row *matRowDef="let row; columns: innerDisplayedColumns;" (click)="toggleSubRow(row)"></tr>
                    <tr mat-row *matRowDef="let row; columns: ['expandedSubDetail']" class="example-detail-row"></tr>
                  </table>
                </div>
              </div>
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="columnsToDisplay"></tr>
          <tr style="height: 37px;" mat-row *matRowDef="let element; columns: columnsToDisplay;"
            [class.example-element-row]="element.addresses?.data.length"
            [class.example-expanded-row]="expandedElement === element" (click)="toggleRow(element)"></tr>
          <tr mat-row *matRowDef="let row; columns: ['expandedDetail']" class="example-detail-row"
            [class.example-expanded-row]="expandedSubElement === element"></tr>
        </table>

      </div>
    </div>
  </div>
</section>