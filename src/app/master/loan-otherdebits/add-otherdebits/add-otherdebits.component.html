 <section class="content">
    <div class="content-block">
      <div class="block-header" style="padding: 0.5% !important;">
        <app-breadcrumb [title]="'Add-Loan-Details'" [items]="['Master']" [active_item]="'Add-Loan-Details'">
        </app-breadcrumb>
      </div>
      <div class="row clearfix">
        <div class=" col-xl-12 col-lg-12 col-md-12 col-sm-12 ">

          <div class="card " style="padding-left: 150px;">
            <div class="body">
              <!-- style="margin-left: -9%;padding: 2%;padding-left: 101px;overflow-x: hidden;" -->
              <!-- <h4 style=" padding-bottom: 40px;  padding-top: 5px; color: #004AAD;">Loan Detail</h4> -->

              <form class="m-4" [formGroup]="docForm" >
                <h4>PERSONAL INFORMATION</h4>
                <br><br>
                <div class="row">
                  <div class="col-xl-2 col-lg-2 col-md-2 col-sm-12" >
                      <mat-label >LOAN-HOLDER NAME<span class="errorColor">*</span></mat-label>
                  </div>
                  <div class=" col-md-3">
                    <mat-form-field class="example-full-width form-control-sm" appearance="outline">
                    <input matInput formControlName="name" 
                    oninput="this.value = this.value.toUpperCase()"
                    (keypress)="keyPressName($event)" >
                    <mat-error *ngIf="docForm.get('name').hasError('required')">
                      Name is required
                    </mat-error>
                  </mat-form-field>
                </div>
                    <div class="col-xl-2 col-lg-2 col-md-2 col-sm-12">
                      <mat-label >D.O.B<span class="errorColor">*</span></mat-label>
                    </div>
                    <div class=" col-md-3">
                      <mat-form-field class="example-full-width form-control-sm" appearance="outline">
                        <input matInput [matDatepicker]="picker6" 
                        formControlName="dobObj"
                        (dateInput)="$event.value.format('DD/MM/YYYY')"
                        id="dob"
                        (dateChange)="getDateString($event, 'dob',0)">
                    <mat-datepicker-toggle matSuffix [for]="picker6"></mat-datepicker-toggle>
                    <mat-datepicker #picker6></mat-datepicker>
                    <mat-error *ngIf="docForm.get('dob').hasError('required')">
                      D.O.B is required
                     </mat-error> 
                      </mat-form-field>
                      
                  </div>
                </div>

                <div class="row">
                    <div class="col-xl-2 col-lg-2 col-md-2 col-sm-12">
                      <mat-label >EMAIL-ID<span class="errorColor">*</span></mat-label>
                    </div>
                    <div class="col-md-3">
                      <mat-form-field class="example-full-width form-control-sm" appearance="outline">
                      <input matInput formControlName="mail" maxlength="30" required>
                      <mat-error *ngIf="docForm.get('mail').hasError('required') || docForm.get('mail').touched" >
                        Please enter a valid email address
                      </mat-error>
                    </mat-form-field>
                  </div>
                  <div class="col-xl-2 col-lg-2 col-md-2 col-sm-12">
                    <mat-label >PHONE NUMBER</mat-label>
                  </div>
                  <div class="col-xl-1 col-lg-1 col-md-12 col-sm-12">
                    <mat-form-field class="example-full-width form-control-sm" appearance="outline" style="width: 90px">
                      <mat-select formControlName="phoneno" (keypress)="keyPressNumeric2($event)">
                        <mat-option *ngFor="let title of CountryCodeList" [value]="title.id">
                          {{title.text}}
                        </mat-option>
                      </mat-select>
                  </mat-form-field>
                </div>
                <div class="col-xl-2 col-lg-2 col-md-12 col-sm-12">
                  <mat-form-field class="example-full-width form-control-sm" appearance="outline">
                    <input matInput formControlName="telepheNo" maxlength="10" (keypress)="keyPressNumeric($event)">
                  </mat-form-field>
                </div>
              </div>

              <div class="row">
                <div class="col-xl-2 col-lg-2 col-md-2 col-sm-12">
                  <mat-label>ADDRESS</mat-label>
                </div>
                <div class="col-md-3">
                  <mat-form-field class="example-full-width form-control-sm" appearance="outline">
                    <textarea matInput formControlName="address" maxlength="250"></textarea>
                  </mat-form-field>
                </div>
                <div class="col-xl-2 col-lg-2 col-md-2 col-sm-12">
                  <mat-label>LOAN REFERENCE<span class="errorColor">*</span></mat-label>
              </div>
              <div class=" col-md-3">
                  <mat-form-field class="example-full-width form-control-sm" appearance="outline">
                  <input matInput formControlName="loanRef" 
                  oninput="this.value = this.value.toUpperCase()"
                  (keypress)="keyPressName($event)" >
                  <mat-error *ngIf="docForm.get('loanRef').hasError('required')">
                    Loan Reference is required
                  </mat-error>
                </mat-form-field>
              </div>
              </div>

              <b><hr></b>
              <h4>LOAN DETAILS</h4>
                <br><br>    
                <div class="row">
                  <!-- <div class="col-xl-2 col-lg-2 col-md-2 col-sm-12" >
                      <mat-label >LOAN PROPERTY</mat-label>
                  </div>
                  <div  class=" col-md-3">
                    <mat-form-field class="example-full-width form-control-sm" appearance="outline">
                      <mat-select tabindex="18" formControlName="loanProperty" (selectionChange)="getPropertyDetails($event.value)">
                        <mat-option *ngFor="let title of loanPropertyList" [value]="title.text">
                          {{title.text}}
                        </mat-option>
                        </mat-select>
                        </mat-form-field>
                  </div> -->
                  <div class="col-xl-2 col-lg-2 col-md-2 col-sm-12">
                    <mat-label >LOAN TYPE<span class="errorColor">*</span></mat-label>
                  </div>
                  <div  class=" col-md-3">
                  <mat-form-field class="example-full-width form-control-sm" appearance="outline">
                    <mat-select class="inputTxt" formControlName="type">
                      <mat-option [value]="'Personal Loan'">
                        Personal Loan
                        </mat-option>
                        <mat-option [value]="'Home Loan'">
                          Home Loan
                        </mat-option>
                        <mat-option [value]="'Education Loan'">
                          Education Loan
                        </mat-option>
                        <mat-option [value]="'Business Loan'">
                          Business Loan
                        </mat-option>
                        <mat-option [value]="'Security Loan'">
                          Security Loan
                        </mat-option>
                        <mat-option [value]="'Property Loa'">
                          Property Loan
                        </mat-option>
                        <mat-option [value]="'Payday Loan'">
                          Payday Loan
                        </mat-option>
                        <mat-option [value]="'Vehicle Loan'">
                          Vehicle Loan 
                        </mat-option>
                  </mat-select>
                      <mat-error *ngIf="docForm.get('type').hasError('required')">
                        Loan type is required
                      </mat-error>
                  </mat-form-field> 
                  </div>

                  <div class="col-xl-2 col-lg-2 col-md-2 col-sm-12">
                    <mat-label >LOAN APPLICATION DATE<span class="errorColor">*</span></mat-label>
                    </div>
                    <div class=" col-md-3">
                      <mat-form-field class="example-full-width form-control-sm" appearance="outline">
                        <input matInput [matDatepicker]="picker3" 
                        formControlName="loanApplicationDateObj"
                        (dateInput)="$event.value.format('DD/MM/YYYY')"
                        id="loanApplicationDate"
                        (dateChange)="getDateString($event, 'loanApplicationDate',0)">
                    <mat-datepicker-toggle matSuffix [for]="picker3"></mat-datepicker-toggle>
                    <mat-datepicker #picker3></mat-datepicker>
                        <mat-error *ngIf="docForm.get('loanApplicationDate').hasError('required')">
                         Application Date is required
                        </mat-error> 
                      </mat-form-field>
                  </div>

                </div>

                <div class="row">
                 
                  <div class="col-xl-2 col-lg-2 col-md-2 col-sm-12">
                    <mat-label >LOAN NUMBER<span class="errorColor">*</span></mat-label>
                </div>
                <div class=" col-md-3">
                    <mat-form-field class="example-full-width form-control-sm" appearance="outline">
                    <input matInput formControlName="loan" maxlength="15" (keypress)="keyPressNumeric($event)" >
                    <mat-error *ngIf="docForm.get('loan').hasError('required')">
                      Loan Number is required
                    </mat-error>
                  </mat-form-field>
                </div>

                <div class="col-xl-2 col-lg-2 col-md-2 col-sm-12">
                  <mat-label >LOAN AMOUNT<span class="errorColor">*</span></mat-label>
                  </div>
                  <div class=" col-md-3">
                    <mat-form-field class="example-full-width form-control-sm" appearance="outline">
                      <input matInput formControlName="loanAmount" (keypress)="keyPressNumeric($event)" maxlength="8" >
                      <mat-error *ngIf="docForm.get('loanAmount').hasError('required')">
                        Loan Amount is required
                      </mat-error>
                    </mat-form-field>
                </div>

              </div>

                <div class="row">  
                   <div class="col-xl-2 col-lg-2 col-md-2 col-sm-12">
                      <mat-label >APPROVAL DATE<span class="errorColor">*</span></mat-label>
                  </div>
                  <div class=" col-md-3">
                      <mat-form-field class="example-full-width form-control-sm" appearance="outline">
                      <input matInput [matDatepicker]="picker4" 
                          formControlName="loanApprovalDateObj"
                          (dateInput)="$event.value.format('DD/MM/YYYY')"
                          id="loanApprovalDate"
                          (dateChange)="getDateString($event, 'loanApprovalDate',0)">
                      <mat-datepicker-toggle matSuffix
                          [for]="picker4"></mat-datepicker-toggle>
                      <mat-datepicker #picker4></mat-datepicker>
                          <mat-error *ngIf="docForm.get('loanApprovalDate').hasError('required')">
                           Approval Date is required
                          </mat-error> 
                    </mat-form-field>
                  </div>

                  <div class="col-xl-2 col-lg-2 col-md-2 col-sm-12">
                    <mat-label >DISBURSEMENT DATE<span class="errorColor">*</span></mat-label>
                </div>
                <div class=" col-md-3">
                    <mat-form-field class="example-full-width form-control-sm" appearance="outline">
                    <input matInput [matDatepicker]="picker5" 
                        formControlName="loanDisbursementDateObj"
                        (dateInput)="$event.value.format('DD/MM/YYYY')"
                        id="loanDisbursementDate"
                        (dateChange)="getDateString($event, 'loanDisbursementDate',0)">
                    <mat-datepicker-toggle matSuffix
                        [for]="picker5"></mat-datepicker-toggle>
                    <mat-datepicker #picker5></mat-datepicker>
                        <mat-error *ngIf="docForm.get('loanDisbursementDate').hasError('required')">
                        Disbursement Date is required
                        </mat-error> 
                  </mat-form-field>
                </div>  
                </div>

                    <div class="row">
                      

                      <div class="col-xl-2 col-lg-2 col-md-2 col-sm-12">
                        <mat-label >LOAN START DATE<span class="errorColor">*</span></mat-label>
                        </div>
                        <div class=" col-md-3">
                          <mat-form-field class="example-full-width form-control-sm" appearance="outline">
                            <input matInput [matDatepicker]="picker" 
                            formControlName="loanStartDateObj"
                            (dateInput)="$event.value.format('DD/MM/YYYY')"
                            id="loanStartDate"
                            (dateChange)="getDateString($event, 'loanStartDate',0)">
                        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                        <mat-datepicker #picker></mat-datepicker>
                            <mat-error *ngIf="docForm.get('loanStartDate').hasError('required')">
                              Loan Start Date is required
                            </mat-error> 
                          </mat-form-field>
                      </div>

                      <div class="col-xl-2 col-lg-2 col-md-2 col-sm-12">
                        <label>CURRENCY<span class="errorColor">*</span></label>
                    </div>
                    <div class=" col-md-3">
                        <mat-form-field class="example-full-width form-control-sm" appearance="outline">
                          <mat-select formControlName="currencyl" >
                            <mat-option [value]="'KSH'">KSH</mat-option>
                            <mat-option [value]="'INR'">INR</mat-option>
                            <mat-option [value]="'TES'">TES</mat-option>
                            </mat-select>
                            <mat-error 
                            *ngIf="docForm.get('currencyl').hasError('required')">
                            Currency is required
                          </mat-error>
                          </mat-form-field>
                          </div>

                     
                  </div>
                  
                  <div class="row">
                    
                   <div class="col-xl-2 col-lg-2 col-md-2 col-sm-12">
                      <mat-label >LOAN END DATE <span class="errorColor">*</span></mat-label>
                  </div>
                  <div class=" col-md-3">
                      <mat-form-field class="example-full-width form-control-sm" appearance="outline">
                      <input matInput [matDatepicker]="picker1" 
                          formControlName="loanDueDateObj"
                          (dateInput)="$event.value.format('DD/MM/YYYY')"
                          id="loanDueDate"
                          (dateChange)="getDateString($event, 'loanDueDate',0)">
                      <mat-datepicker-toggle matSuffix
                          [for]="picker1"></mat-datepicker-toggle>
                      <mat-datepicker #picker1></mat-datepicker>
                          <mat-error *ngIf="docForm.get('loanDueDate').hasError('required')">
                            Loan End Date is required
                          </mat-error> 
                    </mat-form-field>
                  </div> 
                </div>

                <b><hr></b>
                <h4>PAYMENT AND INTEREST</h4>
                <br><br>

                <div class="row">
                              
                    
                  <div class="col-xl-2 col-lg-2 col-md-2 col-sm-12">
                    <mat-label >EMI AMOUNT<span class="errorColor">*</span></mat-label>
                </div>
                <div class=" col-md-3">
                  <mat-form-field class="example-full-width form-control-sm" appearance="outline">
                    <input matInput formControlName="amount" (keypress)="keyPressNumberDouble($event)" maxlength="6" >
                    <mat-error *ngIf="docForm.get('amount').hasError('required')">
                     EMI Amount is required
                     </mat-error>
                  </mat-form-field>
                </div>

                  <div class="col-xl-2 col-lg-2 col-md-2 col-sm-12">
                    <mat-label >EMI DATE<span class="errorColor">*</span></mat-label>
                </div>
                <div class=" col-md-3">
                    <mat-form-field class="example-full-width form-control-sm" appearance="outline">
                    <input matInput [matDatepicker]="picker2" 
                    formControlName="emidateObj"
                    (dateInput)="$event.value.format('DD/MM/YYYY')"
                    id="emiDate"
                    (dateChange)="getDateString($event, 'emiDate',0)">
                <mat-datepicker-toggle matSuffix
                    [for]="picker2"></mat-datepicker-toggle>
                <mat-datepicker #picker2></mat-datepicker>
                    <mat-error *ngIf="docForm.get('emiDate').hasError('required')">
                      EMI Date is required
                    </mat-error>
                  </mat-form-field>
                </div>
                  </div>

                  <div class="row">
                    <div class="col-xl-2 col-lg-2 col-md-2 col-sm-12">
                      <mat-label >PENALITY AMOUNT</mat-label>
                    </div>
                    <div class=" col-md-3">
                        <mat-form-field class="example-full-width form-control-sm" appearance="outline">
                        <input matInput formControlName="penalityAmount" (keypress)="keyPressNumberDouble($event)" maxlength="8">
                        <mat-error *ngIf="docForm.get('penalityAmount').hasError('required')">
                          Penality Amount is required
                        </mat-error>
                      </mat-form-field>
                    </div>
                      <div class="col-xl-2 col-lg-2 col-md-2 col-sm-12">
                        <mat-label>RATE OF INTEREST (%)<span class="errorColor">*</span></mat-label>
                    </div>
                    <div class=" col-md-3">
                        <mat-form-field class="example-full-width form-control-sm" appearance="outline">
                        <input matInput formControlName="interestRate" (keypress)="keyPressNumberDouble($event)" maxlength="5" >
                        <mat-error *ngIf="docForm.get('interestRate').hasError('required')">
                          Rate of Interest is required
                        </mat-error>
                      </mat-form-field>
                    </div>
              </div>

              <b><hr></b>
              <h4>LOAN BANK DETAILS</h4>
              <br><br>

              <div class="row">
                <div class="col-xl-2 col-lg-2 col-md-2 col-sm-12">
                  <mat-label >BANK NAME<span class="errorColor">*</span></mat-label>
              </div>
              <div  class=" col-md-3">
                <mat-form-field class="example-full-width form-control-sm" appearance="outline">
                  <mat-select class="inputTxt" formControlName="bankname" >
                    <mat-option [value]="'SBI'">
                        SBI
                      </mat-option>
                      <mat-option [value]="'IOB'">
                        IOB
                      </mat-option>
                      <mat-option [value]="'HDFC'">
                        HDFC
                      </mat-option>
                      <mat-option [value]="'INDIAN BANK'">
                        INDIAN BANK
                      </mat-option>
                      <mat-option [value]="'ICICI'">
                        ICICI
                      </mat-option>
                </mat-select>
                  <mat-error *ngIf="docForm.get('bankname').hasError('required')">
                    Bank Name is required
                  </mat-error>
                </mat-form-field>
              </div>

                <div class="col-xl-2 col-lg-2 col-md-2 col-sm-12">
                  <mat-label >LOAN ACCOUNT No.<span class="errorColor">*</span></mat-label>
              </div>
              <div class=" col-md-3">
                  <mat-form-field class="example-full-width form-control-sm" appearance="outline">
                  <input matInput formControlName="account" maxlength="12"  (keypress)="keyPressNumeric($event)">
                  <mat-error *ngIf="docForm.get('account').hasError('required')">
                   Account Number is required
                  </mat-error>
                </mat-form-field>
              </div>
            </div>  

              <div class="row">

                <div class="col-xl-2 col-lg-2 col-md-2 col-sm-12">
                 <mat-label >BRANCH NAME</mat-label>
             </div>
             <div  class=" col-md-3">
               <mat-form-field class="example-full-width form-control-sm" appearance="outline">
                 <input matInput formControlName="branchName" (keypress)="keyPressName($event)">
               </mat-form-field>
             </div>
             <div class="col-xl-2 col-lg-2 col-md-2 col-sm-12" >
               <mat-label >BANK IFSC<span class="errorColor">*</span></mat-label>
           </div>
           <div class=" col-md-3">
             <mat-form-field class="example-full-width form-control-sm" appearance="outline" >
               <input matInput formControlName="ifsccode"  oninput="this.value = this.value.toUpperCase()"
                maxlength="16" required>
               <mat-error *ngIf="docForm.get('ifsccode').hasError('pattern')">
                 Please Enter Valid IFSC code
               </mat-error>
               <mat-error *ngIf="docForm.get('ifsccode').hasError('required')">
                 IFSC Code is required
               </mat-error>
             </mat-form-field>
           </div> 
          </div>

                          <div class="row">
                            <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 mb-3">
                              <button *ngIf="!edit" (click) = "onSubmit()" class="btn-space" mat-raised-button
                              color="accent" style="margin-left: 36%;background-color: #34d034;">Submit</button>
                              <button *ngIf="edit" (click) = "update()" class="btn-space" mat-raised-button color="accent" style="margin-left: 36%;background-color: #34d034;">Update</button>
                              <button (click) = "reset()" class="btn-space" mat-raised-button color="primary" >Reset</button>
                              <button (click) = "cancel()" color="warn" type="button" mat-raised-button>Cancel</button>
                            </div>
                          </div> 
                </form>
                </div>
                </div>
                </div>
                </div>
                </div>
            </section>